<!doctype html>
<html lang="en">
     <head>
          <meta charset="UTF-8">
          <!--<meta http-equiv="Cache-Control" content="no-cache" />
          <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> -->
          <meta http-equiv="X-UA-Compatible" content="IE=edge">
          <meta name="author" content="William Michael">
          <meta name="viewport" content="width=device-width, initial-scale=1">     
          <meta name="description" content="We are a community theater troupe that has been putting on two shows a year with a full orchestra for over 100 years, performance are in the spring and fall" />
          <meta name="keywords" content="The Pirates of Penzance, Me and My Girl, Rose Valley, Delaware Valley, theater, theatre, performance, orchestra, Rose Valley, Media, Springfield" />
          <title>Rose Valley Chorus & Orchestra</title>
          <link rel="shortcut icon" href="images/rvco.ico" />

          <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
          <link href="/css/style.css" rel="stylesheet">

          
          <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
          <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
          <!--[if lt IE 9]>
               <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
               <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
          <![endif]-->

     </head>
     <body>

          <!-- Header / Navbar -->
          <div id="headerContainer"></div>

          <!-- Main content (HTMX swaps content here) -->
          <main id="content" hx-get="/fragments/home.html" hx-trigger="load"></main>

          <!-- Footer -->
          <div id="footerContainer"></div>

          <!-- Bootstrap JS -->
          <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
          <!-- HTMX -->
          <script src="https://unpkg.com/htmx.org@1.11.0"></script>

          <!-- JS: Load header/footer + initial HTMX main content -->
          <!-- Load header/footer and adjust main padding -->
          <script>
              async function loadHeaderFooterAndMain() {
                    // Fetch header and footer
                    const header = await fetch('/components/header.html').then(r => r.text());
                    const footer = await fetch('/components/footer.html').then(r => r.text());

                    document.getElementById('headerContainer').innerHTML = header;
                    document.getElementById('footerContainer').innerHTML = footer;

                    updateContentPadding();

                    // Trigger HTMX load of initial content after header/footer exist
                    htmx.trigger(document.getElementById('content'), 'load');
               }

               function updateContentPadding() {
                    const headerEl = document.querySelector('#headerContainer > *');
                    const footerEl = document.querySelector('#footerContainer > *');
                    const main = document.getElementById('content');
                    const navHeight = headerEl ? headerEl.offsetHeight : 0;
                    const footHeight = footerEl ? footerEl.offsetHeight : 0;

                    document.documentElement.style.setProperty('--navbar-height', navHeight + 'px');
                    document.documentElement.style.setProperty('--footer-height', footHeight + 'px');

                    main.style.paddingTop = navHeight + 'px';
                    main.style.paddingBottom = footHeight + 'px';
                    main.style.height = `calc(100vh - ${navHeight + footHeight}px)`;
               }

               // Initialize
               loadHeaderFooterAndMain();

               window.addEventListener('resize', updateContentPadding);
               document.body.addEventListener('htmx:afterSwap', e => {
                    if(e.target.id === 'content') updateContentPadding();
               });
          </script>
     </body>
</html>
